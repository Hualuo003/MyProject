<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>登录</title>
	</head>
	<script src="./js/jquery-3.3.1.min.js"></script>	<!--ajax所在的js包-->
	<body>
		
		&nbsp&nbsp&nbsp&nbsp&nbsp
		<form id="namepassword" method="post" action=""/AdminLogin"">		<!--表单标签-->
			<fieldset >														<!--框架式结构-->
				<br/>														<!--换行-->
				<legend>登录</legend>										<!--框架名称-->
				<label for="username">用户名：</label>						<!--用户名标签，关联文本输入框-->
				<input type="text" id="username" name="username" size="15" maxlength="25"/>		<!--文本输入框-->
				<br/><br/>
				<label for="password">密&nbsp码：</label>
				<input type="password" id="password" name="password"size="15" maxlength="25"/>		<!--密码输入框-->
				<br/>
				<!--<style>p.indent{padding-left: 1.8em}</style>-->
				<!--此处添加空格-->
				<br/>
				&nbsp&nbsp&nbsp&nbsp&nbsp
				<button type="button" onclick="login()">登录</button>	<!--按钮标签，点击时连接到Login()函数-->
				<button type="button" onclick="register()">注册</button>		<!--注册按钮-->
			</fieldset>
		</from>
	
		<!--内嵌的JavaScript程序-->
		<script>
			function login()	//login函数
			{
				var x=document.getElementById("username").value;	//获取用户名
				var y=document.getElementById("password").value;	//获取密码

				//在前台匹配用户名和密码是否正确
//				if(x==1001&y==0001)
//				{
//					alert("登陆成功，请稍后");
//				//	window.location.href="/Homepage";
//				}
//				else
//				{
//					alert("用户名或密码错误");
//				}
	

				//向后台发送数据，向后台发送post请求
				$.ajax
			    ({
			      	     url: "http://127.0.0.1:8080/AdminLogin", //加上这句话
			           // xhrFields: {
			            //    withCredentials: true
			            //},
			            //crossDomain: true,
			            type: 'POST',				//请求的类型
			            async: false,
			            dataType: "text",			//数据类型
			            data: {
			                "username": $("#username").val(),	//向后台发送数据，并在后台判断用户名和密码是否正确，正确则返回true
			                "password": $("#password").val(),
			            },
			            success:function(data) 	 //操作后台的返回值
			            {
			                 if (data==1)           //如果前台返回的是True，执行以下操作
			                 {
								alert("登陆成功，请稍后");					//登录成功时跳出提示框
			                 	window.location.href="HomePage.html";		//登录成功
			                 }
			                 else
			                 {
			                 	alert("用户名或密码错误");
			                 }
			            }
			    })

			}
			
			function register()
			{
				window.location.href="Register.html";
			}
		</script>
	</body>
</html>




